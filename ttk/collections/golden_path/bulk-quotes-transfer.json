{
  "name": "multi",
  "test_cases": [
    {
      "id": 1,
      "name": "Bulk Transfer",
      "fileInfo": {
        "path": "collections/golden_path/bulk-quotes-transfer.json"
      },
      "requests": [
        {
          "id": 1,
          "description": "Post Quotes",
          "apiVersion": {
            "minorVersion": 0,
            "majorVersion": 1,
            "type": "scheme_adapter_outbound"
          },
          "operationPath": "/bulkQuotes",
          "path": "/bulkQuotes",
          "method": "post",
          "url": null,
          "body": {
            "homeTransactionId": "{$function.generic.generateUUID}",
            "bulkQuoteId": "{$function.generic.generateUUID}",
            "from": {
              "idType": "MSISDN",
              "idValue": "{$inputs.TTKSIM1_MSISDN_1}",
              "type": "CONSUMER",
              "displayName": "{$inputs.TTKSIM1_MSISDN_1_FIRST_NAME} {$inputs.TTKSIM1_MSISDN_1_LAST_NAME}",
              "firstName": "{$inputs.TTKSIM1_MSISDN_1_FIRST_NAME}",
              "middleName": "Something",
              "lastName": "{$inputs.TTKSIM1_MSISDN_1_LAST_NAME}",
              "fspId": "{$inputs.TTKSIM1_FSPID}"
            },
            "individualQuotes": [
              {
                "quoteId": "{$function.generic.generateUUID}",
                "to": {
                  "type": "CONSUMER",
                  "idType": "MSISDN",
                  "idValue": "{$inputs.TTKSIM2_MSISDN_1}",
                  "fspId": "{$inputs.TTKSIM2_FSPID}"
                },
                "amountType": "SEND",
                "currency": "{$inputs.TTKSIM2_CURRENCY}",
                "amount": "{$inputs.TRANSFER_AMOUNT}",
                "transactionType": "TRANSFER",
                "note": "test"
              },
              {
                "quoteId": "{$function.generic.generateUUID}",
                "to": {
                  "type": "CONSUMER",
                  "idType": "MSISDN",
                  "idValue": "{$inputs.TTKSIM2_MSISDN_2}",
                  "fspId": "{$inputs.TTKSIM2_FSPID}"
                },
                "amountType": "SEND",
                "currency": "{$inputs.TTKSIM2_CURRENCY}",
                "amount": "{$inputs.TRANSFER_AMOUNT}",
                "transactionType": "TRANSFER",
                "note": "test"
              }
            ]
          },
          "tests": {
            "assertions": [
              {
                "id": 1,
                "description": "Status code is 200",
                "exec": [
                  "expect(response.status).to.equal(200)"
                ]
              }
            ]
          }
        },
        {
          "id": 2,
          "description": "Bulk Transfer",
          "apiVersion": {
            "minorVersion": 0,
            "majorVersion": 1,
            "type": "scheme_adapter_outbound"
          },
          "operationPath": "/bulkTransfers",
          "path": "/bulkTransfers",
          "method": "post",
          "body": {
            "homeTransactionId": "{$prev.1.request.body.homeTransactionId}",
            "bulkQuoteId": "{$prev.1.request.body.bulkQuoteId}",
            "bulkTransferId": "{$function.generic.generateUUID}",
            "from": {
              "idType": "MSISDN",
              "idValue": "{$inputs.TTKSIM1_MSISDN_1}",
              "type": "CONSUMER",
              "displayName": "{$inputs.TTKSIM1_MSISDN_1_FIRST_NAME} {$inputs.TTKSIM1_MSISDN_1_LAST_NAME}",
              "firstName": "{$inputs.TTKSIM1_MSISDN_1_FIRST_NAME}",
              "middleName": "Something",
              "lastName": "{$inputs.TTKSIM1_MSISDN_1_LAST_NAME}",
              "fspId": "{$inputs.TTKSIM1_FSPID}"
            },
            "individualTransfers": [
              {
                "transferId": "{$function.generic.generateUUID}",
                "ilpPacket": "{$prev.1.response.body.individualQuoteResults[0].ilpPacket}",
                "condition": "{$prev.1.response.body.individualQuoteResults[0].condition}",
                "to": {
                  "type": "CONSUMER",
                  "idType": "MSISDN",
                  "idValue": "{$inputs.TTKSIM2_MSISDN_1}",
                  "fspId": "{$inputs.TTKSIM2_FSPID}"
                },
                "amountType": "SEND",
                "currency": "{$inputs.TTKSIM2_CURRENCY}",
                "transactionType": "TRANSFER",
                "amount": "{$inputs.TRANSFER_AMOUNT}",
                "homeTransactionId": "{$function.generic.generateUUID}",
                "note": "test"
              },
              {
                "transferId": "{$function.generic.generateUUID}",
                "ilpPacket": "{$prev.1.response.body.individualQuoteResults[1].ilpPacket}",
                "condition": "{$prev.1.response.body.individualQuoteResults[1].condition}",
                "to": {
                  "type": "CONSUMER",
                  "idType": "MSISDN",
                  "idValue": "{$inputs.TTKSIM2_MSISDN_2}",
                  "fspId": "{$inputs.TTKSIM2_FSPID}"
                },
                "amountType": "SEND",
                "currency": "{$inputs.TTKSIM2_CURRENCY}",
                "transactionType": "TRANSFER",
                "amount": "{$inputs.TRANSFER_AMOUNT}",
                "homeTransactionId": "{$function.generic.generateUUID}",
                "note": "test"
              }
            ]
          },
          "url": null,
          "disabled": false,
          "tests": {
            "assertions": [
              {
                "id": 1,
                "description": "Status code is 200",
                "exec": [
                  "expect(response.status).to.equal(200)"
                ]
              }
            ]
          }
        }
      ]
    },
    {
      "id": 2,
      "name": "TC-BQ2. Test 400 for a Bad Request.",
      "fileInfo": {
        "path": "collections/golden_path/bulk-quotes-transfer.json"
      },
      "requests": [
        {
          "id": 1,
          "description": "Post Quotes",
          "apiVersion": {
            "minorVersion": 0,
            "majorVersion": 1,
            "type": "scheme_adapter_outbound"
          },
          "operationPath": "/bulkQuotes",
          "path": "/bulkQuotes",
          "method": "post",
          "url": null,
          "body": {
            "homeTransactionId": "{$function.generic.generateUUID}",
            "bulkQuoteId": "{$function.generic.generateUUID}",
            "from": {
              "idType": "MSISDN",
              "idValue": "{$inputs.TTKSIM1_MSISDN_1}",
              "type": "CONSUMER",
              "displayName": "{$inputs.TTKSIM1_MSISDN_1_FIRST_NAME} {$inputs.TTKSIM1_MSISDN_1_LAST_NAME}",
              "firstName": "{$inputs.TTKSIM1_MSISDN_1_FIRST_NAME}",
              "middleName": "Something",
              "lastName": "{$inputs.TTKSIM1_MSISDN_1_LAST_NAME}",
              "fspId": "{$inputs.TTKSIM1_FSPID}"
            },
            "individualQuotes": [
              {
                "quoteId": "123",
                "to": {
                  "type": "CONSUMER",
                  "idType": "MSISDN",
                  "idValue": "{$inputs.TTKSIM2_MSISDN_1}",
                  "fspId": "{$inputs.TTKSIM2_FSPID}"
                },
                "amountType": "SEND",
                "currency": "{$inputs.TTKSIM2_CURRENCY}",
                "amount": "{$inputs.TRANSFER_AMOUNT}",
                "transactionType": "TRANSFER",
                "note": "blkqtbatchfailure"
              }
            ]
          },
          "scriptingEngine": "javascript",
          "tests": {
            "assertions": [
              {
                "id": 1,
                "description": "Return Status Code should be 400",
                "exec": [
                  "expect(response.status).to.equal(400)",
                  ""
                ]
              }
            ]
          },
          "scripts": {
            "preRequest": {
              "exec": [
                "requestVariables.bulkTimeout = (new Date(Date.now()+120000)).toISOString()"
              ]
            }
          }
        }
      ]
    },
    {
      "id": 3,
      "name": "TC-BQ3. Test 500 for a Error occured processing bulk request.",
      "fileInfo": {
        "path": "collections/golden_path/bulk-quotes-transfer.json"
      },
      "requests": [
        {
          "id": 1,
          "description": "Post Quotes",
          "apiVersion": {
            "minorVersion": 0,
            "majorVersion": 1,
            "type": "scheme_adapter_outbound"
          },
          "operationPath": "/bulkQuotes",
          "path": "/bulkQuotes",
          "method": "post",
          "url": null,
          "body": {
            "homeTransactionId": "{$function.generic.generateUUID}",
            "bulkQuoteId": "{$function.generic.generateUUID}",
            "from": {
              "idType": "MSISDN",
              "idValue": "{$inputs.TTKSIM1_MSISDN_1}",
              "type": "CONSUMER",
              "displayName": "{$inputs.TTKSIM1_MSISDN_1_FIRST_NAME} {$inputs.TTKSIM1_MSISDN_1_LAST_NAME}",
              "firstName": "{$inputs.TTKSIM1_MSISDN_1_FIRST_NAME}",
              "middleName": "Something",
              "lastName": "{$inputs.TTKSIM1_MSISDN_1_LAST_NAME}",
              "fspId": "{$inputs.TTKSIM1_FSPID}"
            },
            "individualQuotes": [
              {
                "quoteId": "{$function.generic.generateUUID}",
                "to": {
                  "type": "CONSUMER",
                  "idType": "MSISDN",
                  "idValue": "{$inputs.TTKSIM2_MSISDN_1}",
                  "fspId": "{$inputs.TTKSIM2_FSPID}"
                },
                "amountType": "SEND",
                "currency": "AUS",
                "amount": "{$inputs.TRANSFER_AMOUNT}",
                "transactionType": "TRANSFER",
                "note": "test"
              },
              {
                "quoteId": "{$function.generic.generateUUID}",
                "to": {
                  "type": "CONSUMER",
                  "idType": "MSISDN",
                  "idValue": "{$inputs.TTKSIM2_MSISDN_2}",
                  "fspId": "{$inputs.TTKSIM2_FSPID}"
                },
                "amountType": "SEND",
                "currency": "INR",
                "amount": "{$inputs.TRANSFER_AMOUNT}",
                "transactionType": "TRANSFER",
                "note": "test"
              }
            ]
          },
          "scriptingEngine": "javascript",
          "tests": {
            "assertions": [
              {
                "id": 1,
                "description": "Return Status Code should be 500",
                "exec": [
                  "expect(response.status).to.equal(500)",
                  ""
                ]
              }
            ]
          },
          "scripts": {
            "preRequest": {
              "exec": [
                "requestVariables.bulkTimeout = (new Date(Date.now()+120000)).toISOString()"
              ]
            }
          }
        }
      ]
    }
  ]
}